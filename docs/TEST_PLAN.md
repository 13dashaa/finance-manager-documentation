# Тест-план (Test Plan) для проекта "Finance Manager"

## 1. Введение (Introduction)

Настоящий документ определяет стратегию, объем, методы и ресурсы, необходимые для тестирования веб-приложения "Finance Manager". Целью тестирования является проверка соответствия реализованного продукта функциональным и нефункциональным требованиям, описанным в Спецификации Требований к ПО (SRS), а также выявление дефектов.

## 2. Объект тестирования (Test Items)

Объектом тестирования является веб-приложение "Finance Manager", состоящее из следующих компонентов:

*   **Backend-приложение:** REST API, разработанное на Java и Spring Boot. Отвечает за всю бизнес-логику и взаимодействие с базой данных.
*   **Frontend-приложение:** Одностраничное приложение (SPA), разработанное на Angular. Отвечает за пользовательский интерфейс.
*   **База данных:** PostgreSQL, используемая для хранения всех данных приложения.

### Ключевые атрибуты качества (согласно SRS):

*   **Функциональность:** Корректность выполнения всех заявленных бизнес-операций.
*   **Удобство использования (Usability):** Интуитивность и простота интерфейса.
*   **Безопасность (Security):** Защита данных пользователя, наличие аутентификации и авторизации.
*   **Производительность (Performance):** Скорость отклика приложения при типичных нагрузках.
*   **Надежность (Reliability):** Стабильность работы приложения, корректная обработка ошибок.

## 3. Риски (Risk Issues)

*   **Некорректные финансовые расчеты:** Ошибки в логике обновления балансов счетов или остатков в бюджетах могут привести к неверным данным.
*   **Проблемы с безопасностью:** Отсутствие или некорректная реализация аутентификации и авторизации может привести к утечке или повреждению пользовательских данных.
*   **Потеря данных:** Ошибки при операциях записи или удаления в базу данных.
*   **Низкая производительность:** Медленная загрузка данных при увеличении количества транзакций, счетов или пользователей.

## 4. Аспекты тестирования (Features to be Tested)

На основе SRS, тестированию подлежат следующие функциональные и нефункциональные аспекты:

### Функциональные требования:
*   **F-1: Управление пользователями (Clients):** Регистрация (не реализована), создание, получение, обновление, удаление.
*   **F-2: Управление счетами (Accounts):** Создание, получение, обновление, удаление счетов, привязка к пользователю.
*   **F-3: Управление категориями (Categories):** Создание, получение, обновление, удаление.
*   **F-4: Управление бюджетами (Budgets):** Создание (включая совместные), получение, обновление, удаление.
*   **F-5: Управление транзакциями (Transactions):** Создание (доход/расход), получение, обновление, удаление. Корректность обновления баланса счета и остатка по бюджету.
*   **F-6: Управление целями (Goals):** Создание, получение, обновление, удаление. Проверка логики пополнения цели.

### Нефункциональные требования:
*   **NF-1: Безопасность:** Тестирование доступа к данным. Попытки получить/изменить данные другого пользователя (на текущем этапе ожидается, что это возможно, что является дефектом).
*   **NF-2: Производительность API:** Замер времени отклика ключевых GET-запросов (например, получение списка транзакций).
*   **NF-3: Обработка ошибок:** Проверка, что API возвращает корректные статусы ошибок (400, 404, 409) и информативные сообщения при некорректных входных данных.

## 5. Подходы к тестированию (Test Approach)

Тестирование будет проводиться преимущественно на уровне **API**, так как это позволяет проверить всю бизнес-логику backend независимо от frontend.

*   **Виды тестирования:**
    *   **Функциональное тестирование:** Проверка API на соответствие функциональным требованиям.
    *   **Тестирование безопасности:** Проверка базовых механизмов защиты данных.
    *   **Нагрузочное тестирование (упрощенное):** Оценка времени отклика.
    *   **Smoke-тестирование:** Быстрая проверка работоспособности основных эндпоинтов после развертывания.

*   **Инструменты:**
    *   **Postman / Insomnia:** Основные инструменты для ручного и автоматизированного тестирования REST API. Будут использоваться для отправки HTTP-запросов и проверки ответов.
    *   **JUnit / Mockito (для разработчиков):** Для модульного (unit) и интеграционного тестирования на уровне кода.

## 6. Представление результатов (Pass / Fail Criteria)

Каждый тестовый сценарий оценивается по принципу **Pass** (пройден) или **Fail** (провален). Сценарий считается пройденным, если фактический результат полностью совпадает с ожидаемым.

### Тестовые сценарии (Test Cases)

| ID | Назначение (Описание) | Сценарий (Действия) | Ожидаемый результат |
| :--- | :--- | :--- | :--- |
| **TC-CLIENT-01** | **(Позитивный)** Создание нового клиента | 1. Отправить POST-запрос на `/clients` с валидным JSON (`username`, `email`, `password`). | 1. Ответ: `HTTP 200 OK`. <br>2. Тело ответа содержит данные созданного клиента с `id`. |
| **TC-CLIENT-02** | **(Негативный)** Создание клиента с существующим email | 1. Создать клиента (см. TC-CLIENT-01). <br>2. Отправить повторный POST-запрос на `/clients` с тем же `email`. | 1. Ответ: `HTTP 409 Conflict` или `HTTP 400 Bad Request` (в зависимости от реализации). <br>2. Тело ответа содержит сообщение об ошибке. |
| **TC-ACC-01** | **(Позитивный)** Создание нового счета для клиента | 1. Создать клиента, получить его `id`. <br>2. Отправить POST-запрос на `/accounts` с JSON, содержащим `name`, `balance` и `clientId`. | 1. Ответ: `HTTP 200 OK`. <br>2. Тело ответа содержит данные созданного счета. |
| **TC-TR-01** | **(Позитивный)** Создание доходной транзакции | 1. Создать клиента и счет для него. <br>2. Отправить POST-запрос на `/transactions` с JSON, содержащим `accountId`, `categoryId` и положительную `amount`. | 1. Ответ: `HTTP 200 OK`. <br>2. Баланс соответствующего счета в БД увеличился на сумму `amount`. |
| **TC-TR-02** | **(Позитивный)** Создание расходной транзакции в рамках бюджета | 1. Создать клиента, счет, категорию, бюджет с лимитом 1000. <br>2. Отправить POST-запрос на `/transactions` с `amount` = -500. | 1. Ответ: `HTTP 200 OK`. <br>2. Баланс счета уменьшился на 500. <br>3. `availableSum` бюджета уменьшился на 500. |
| **TC-TR-03** | **(Негативный)** Создан