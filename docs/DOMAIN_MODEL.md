# Finance Manager - Описание Модели Данных (Схема БД)

## Обзор
Этот документ описывает ключевые сущности и их взаимосвязи в рамках приложения "Finance Manager". Модель данных служит концептуальной основой для схемы базы данных проекта и его объектно-ориентированного проектирования.

## Схема Базы Данных

*Примечание: Вам необходимо сгенерировать изображение из dbdiagram.io, сохранить его в проект и вставить сюда правильный путь.*
![Схема Базы Данных](/docs/schema/uml_trpo.png)

## Описание Схемы

Ключевые сущности в домене "Finance Manager" вращаются вокруг управления пользователями, их счетами, финансовыми операциями и инструментами планирования.

Основные сущности:

*   **`Client`**: Центральная сущность, представляющая пользователя системы. Все остальные данные (счета, бюджеты, цели) принадлежат конкретному пользователю или связаны с ним.
*   **`Account`**: Представляет финансовый счет пользователя (например, "Кошелек", "Карта Сбербанка"). Является источником или получателем средств при транзакциях.
*   **`Transaction`**: Атомарная финансовая операция, будь то доход или расход. Каждая транзакция привязана к счету и категории.
*   **`Category`**: Классификатор для транзакций (например, "Продукты", "Транспорт", "Зарплата").
*   **`Budget`**: Инструмент планирования, который устанавливает лимит расходов для определенной категории на заданный период.
*   **`Goal`**: Финансовая цель, которую ставит перед собой пользователь (например, "Накопить на отпуск").

### Ключевые взаимосвязи:

1.  **Client ↔ Account (Один-ко-многим)**:
    *   Один `Client` может иметь несколько `Account` (например, наличные и несколько банковских карт).
    *   Каждый `Account` принадлежит строго одному `Client`.

2.  **Client ↔ Goal (Один-ко-многим)**:
    *   Один `Client` может ставить перед собой множество `Goal`.
    *   Каждая `Goal` принадлежит одному `Client`.

3.  **Account ↔ Transaction (Один-ко-многим)**:
    *   С одного `Account` может быть совершено множество `Transaction`.
    *   Каждая `Transaction` обязательно привязана к одному `Account`.

4.  **Category ↔ Transaction (Один-ко-многим)**:
    *   В одной `Category` может быть много `Transaction`.
    *   Каждая `Transaction` относится к одной `Category`.

5.  **Category ↔ Budget (Один-ко-многим)**:
    *   Для одной `Category` можно создать несколько `Budget` (например, на разные месяцы).
    *   Каждый `Budget` устанавливает лимит для одной конкретной `Category`.

6.  **Client ↔ Budget (Многие-ко-многим)**:
    *   Эта сложная связь реализуется через **связующую таблицу `client_budgets`**.
    *   Один `Client` может участвовать в нескольких `Budget`.
    *   Один `Budget` может быть общим для нескольких `Client` (например, семейный бюджет на продукты).

### Атрибуты сущностей:
*   **`clients`**: `id` (PK), `username`, `email`, `password`.
*   **`accounts`**: `id` (PK), `name`, `balance`, `client_id` (FK к clients).
*   **`goals`**: `id` (PK), `name`, `targetAmount`, `currentAmount`, `endDate`, `client_id` (FK к clients).
*   **`transactions`**: `id` (PK), `description`, `amount`, `date`, `account_id` (FK к accounts), `category_id` (FK к categories).
*   **`categories`**: `id` (PK), `name`.
*   **`budgets`**: `id` (PK), `limitation`, `availableSum`, `period`, `category_id` (FK к categories).
*   **`client_budgets`**: `client_id` (Составной PK, FK к clients), `budget_id` (Составной PK, FK к budgets).

Эта модель обеспечивает полную изоляцию финансовых данных между разными пользователями, предоставляет гибкую структуру для учета операций и поддерживает как личное, так и совместное ведение бюджетов.